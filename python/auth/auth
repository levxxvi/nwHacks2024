
# pip3 install spotipy Flask Flask-Session
import spotipy
from spotipy.oauth2 import SpotifyClientCredentials
from flask import Flask
from flask_session import Session
import os
import redirect

app = Flask(__name__)
app.config['SECRET_KEY'] = os.urandom(64)
app.config['SESSION_SECRET'] =
app.config['SESSION_TYPE'] =
app.config['SESSION_FILE_DIR'] 
Session(app)

@app.route('/')
def index():
#html redirect to login page
@app.route('/login')
def login():
    cache_handler = spotipy.cache_handler.FlaskSessionCacheHandler(session)

    auth_manager = spotipy.oauth2.SpotifyOAuth(scope='user-read-currently-playing playlist-modify-private',
                                               redirect_uri='',
                                               cache_handler=cache_handler,
                                               show_dialog=True)
    
    auth_url = auth_manager.get_authorize_url()

    return redirect(auth_url)